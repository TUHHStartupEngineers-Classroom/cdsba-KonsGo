{
  "hash": "2a8fd994c6d92b1f7d005fa67fa47918",
  "result": {
    "markdown": "---\ntitle: \"Randomized Controlled Trials\"\n---\n\n\nThis section will use the data from *abtest_online.rds*\n\n::: {.cell hash='06_rct_cache/html/unnamed-chunk-1_84daf797dc37b0eac0a01ba76e391831'}\n::: {.cell-output .cell-output-stdout}\n```\n#>       ip             chatbot        previous_visit   mobile_device  \n#>  Length:1000        Mode :logical   Min.   : 0.000   Mode :logical  \n#>  Class :character   FALSE:496       1st Qu.: 1.000   FALSE:683      \n#>  Mode  :character   TRUE :504       Median : 1.000   TRUE :317      \n#>                                     Mean   : 2.021                  \n#>                                     3rd Qu.: 3.000                  \n#>                                     Max.   :13.000                  \n#>     purchase     purchase_amount\n#>  Min.   :0.000   Min.   : 0.00  \n#>  1st Qu.:0.000   1st Qu.: 0.00  \n#>  Median :0.000   Median : 0.00  \n#>  Mean   :0.381   Mean   :13.14  \n#>  3rd Qu.:1.000   3rd Qu.:27.44  \n#>  Max.   :1.000   Max.   :81.35\n```\n:::\n:::\n\n\n# Check the balance of the covariates\n\n\n::: {.cell hash='06_rct_cache/html/unnamed-chunk-2_afe2e6ce32b04f003b6ff7dee089e093'}\n::: {.cell-output-display}\n![](06_rct_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n\n::: {.cell-output-display}\n![](06_rct_files/figure-html/unnamed-chunk-2-2.png){width=672}\n:::\n:::\n\nThe plot shows the distribution of the two groups *chatbot* and *no chatbot*.\nAs one can see the covariate of previous_visits is not balanced, while the covariate for mobile_device is balanced.\n\n# Regression to find the effect of chatbot on sales\n\n\n::: {.cell hash='06_rct_cache/html/unnamed-chunk-3_f025b5886f7e9a829b6dd7d0de87d0cb'}\n::: {.cell-output .cell-output-stdout}\n```\n#> \n#> Call:\n#> lm(formula = purchase_amount ~ chatbot, data = df)\n#> \n#> Residuals:\n#>     Min      1Q  Median      3Q     Max \n#> -16.702 -14.478  -9.626  13.922  64.648 \n#> \n#> Coefficients:\n#>             Estimate Std. Error t value Pr(>|t|)    \n#> (Intercept)  16.7017     0.8374  19.944  < 2e-16 ***\n#> chatbotTRUE  -7.0756     1.1796  -5.998 2.79e-09 ***\n#> ---\n#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#> \n#> Residual standard error: 18.65 on 998 degrees of freedom\n#> Multiple R-squared:  0.0348,\tAdjusted R-squared:  0.03383 \n#> F-statistic: 35.98 on 1 and 998 DF,  p-value: 2.787e-09\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n#> \n#> Call:\n#> lm(formula = purchase_amount ~ chatbot + previous_visit, data = df)\n#> \n#> Residuals:\n#>    Min     1Q Median     3Q    Max \n#> -25.20 -14.57  -8.94  12.58  64.00 \n#> \n#> Coefficients:\n#>                Estimate Std. Error t value Pr(>|t|)    \n#> (Intercept)     14.9998     1.0410  14.408  < 2e-16 ***\n#> chatbotTRUE     -6.8446     1.1788  -5.806 8.58e-09 ***\n#> previous_visit   0.7845     0.2868   2.736  0.00633 ** \n#> ---\n#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#> \n#> Residual standard error: 18.59 on 997 degrees of freedom\n#> Multiple R-squared:  0.04199,\tAdjusted R-squared:  0.04007 \n#> F-statistic: 21.85 on 2 and 997 DF,  p-value: 5.17e-10\n```\n:::\n:::\n\n\nRegression confirms the results of part 1. As the previous visits are not a \nbalanced covariate. They can't be excluded from the regression\n\n# Subgroup specific effects\n\nThis journal used for this assignment the subgroup: *moblie users*.\n\n\n::: {.cell hash='06_rct_cache/html/unnamed-chunk-4_17ea54b67026d2e8e0c7fa9f6c5ee28c'}\n::: {.cell-output .cell-output-stdout}\n```\n#> \n#> Call:\n#> lm(formula = purchase_amount ~ chatbot * mobile_device + previous_visit, \n#>     data = df)\n#> \n#> Residuals:\n#>     Min      1Q  Median      3Q     Max \n#> -25.403 -14.450  -8.445  12.549  64.562 \n#> \n#> Coefficients:\n#>                               Estimate Std. Error t value Pr(>|t|)    \n#> (Intercept)                   15.27384    1.19130  12.821  < 2e-16 ***\n#> chatbotTRUE                   -6.82837    1.42580  -4.789 1.93e-06 ***\n#> mobile_deviceTRUE             -0.82375    1.79309  -0.459  0.64605    \n#> previous_visit                 0.77914    0.28711   2.714  0.00677 ** \n#> chatbotTRUE:mobile_deviceTRUE -0.06455    2.52907  -0.026  0.97964    \n#> ---\n#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#> \n#> Residual standard error: 18.6 on 995 degrees of freedom\n#> Multiple R-squared:  0.04243,\tAdjusted R-squared:  0.03858 \n#> F-statistic: 11.02 on 4 and 995 DF,  p-value: 9.485e-09\n```\n:::\n:::\n\n\nThe subgroup of mobile users has no specific effect on the purchase amount,\nas one can see by the results of the CATE with mobile users, as they are not significant.\n\n# Logistic regression for *purchase*\n\n\n::: {.cell hash='06_rct_cache/html/unnamed-chunk-5_ab5b9e74f33880199d8b7925f413758c'}\n::: {.cell-output .cell-output-stdout}\n```\n#> \n#> Call:\n#> glm(formula = purchase ~ chatbot + previous_visit, family = binomial(link = \"logit\"), \n#>     data = df)\n#> \n#> Coefficients:\n#>                Estimate Std. Error z value Pr(>|z|)    \n#> (Intercept)    -0.24533    0.11384  -2.155   0.0312 *  \n#> chatbotTRUE    -0.96827    0.13561  -7.140 9.33e-13 ***\n#> previous_visit  0.10643    0.03261   3.264   0.0011 ** \n#> ---\n#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#> \n#> (Dispersion parameter for binomial family taken to be 1)\n#> \n#>     Null deviance: 1329.1  on 999  degrees of freedom\n#> Residual deviance: 1262.5  on 997  degrees of freedom\n#> AIC: 1268.5\n#> \n#> Number of Fisher Scoring iterations: 4\n```\n:::\n:::\n\n\ne^(-0.96827)^ = 0.3797 -> 1 - 0.3797 = 0.6203\n\nThe chatbot is associated with a 62% reduction of purchases. This means\nthat chatbot more than halves the amount of purchases made.\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}